<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
 xmlns:ui="http://java.sun.com/jsf/facelets" 
  xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
 	xmlns:h="http://java.sun.com/jsf/html">
<h:head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="stylesheet" href="resource/css/bootstrap.css"/>
<link rel="stylesheet" href="resource/mystyle/home.css"/>

<script type="text/javascript" src="resource/js/bootstrap.js"/>
<script type="text/javascript" src="resource/js/jquery.js"/>

	<title> Request </title>
	
	<script>

function setRequestHiddenValue(new_value)
{
	
	document.getElementById('requestForm:requestId').value = new_value;

}

</script>
	
</h:head>
<h:body>

<div id="header">
	<ui:insert name="header">
		<ui:include src="header.xhtml" />
	</ui:insert>
</div>
       
      <!-- -end of header --> 
      
   
	<div id="categoryheader">
	<ui:insert name="categoryheader">
		<ui:include src="categoryheader.xhtml" />
	</ui:insert>
</div>
        
       <!-- -end of categoryheader -->
        

     
  <div class="container fixedcontainer" style=" margin-top:1cm; ">
      
         <h:form id="requestForm">
         <h:inputHidden id="requestId" value="#{createrequest.requestId}" ></h:inputHidden>
      <div class="row">
      
      	<div class="col-sm-6">
      		<span style=";font-size:25px;margin-left: 3px;">Manage New Request</span>
      	</div>
    
     	<div class="col-sm-6">    
     			
			 <h:commandLink  value="Create New Request" action="#{createrequest.createRequest}" class="btn btn-primary btn-md pull-right"/> 
			
			
		</div>

	  </div>



     <div>

<p:dataTable id="requestTable"  var="request1" value="#{createrequest.newrequestList}"  reflow="true" class="table table-striped table-hover table-bordered">
    <p:column headerText="Title">
        <h:outputText value="#{request1.title}" />
    </p:column>
 
 	<p:column headerText="Description">
        <h:outputText value="#{request1.description}" />
    </p:column>
    
    <p:column headerText="Completion Date" style="width:5cm;">
        <h:outputText value="#{request1.completiondate}" />
    </p:column>
    
    <p:column headerText="Category">
        <h:outputText value="#{request1.usercategory}" />
    </p:column>
    
    <p:column headerText="Project">
        <h:outputText value="#{request1.userproject}" />
    </p:column>
    
    <p:column headerText="Requesttype">
        <h:outputText value="#{request1.userrequesttype}" />
    </p:column>
    
     <p:column headerText="Team Member">
        <h:outputText value="#{request1.friendName}" />
    </p:column>
    
    
    <p:column headerText="Status">
        <h:outputText value="#{request1.status}" />
    </p:column>
    
     <p:column headerText="Attachment" style="margin-right:20cm;  width:3.5cm;" >
       <p:dialog modal="true" widgetVar="statusDialog" header="Status" draggable="false" closable="false" resizable="false">
    <p:graphicImage name="/demo/images/ajaxloadingbar.gif" />
</p:dialog>
<p:commandButton value="Download" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" >
        <p:fileDownload value="#{fileDownloadView.file}" />
    </p:commandButton>
    </p:column>
    
     <p:column headerText="Modify">
<p:commandLink id="nonAjax" styleClass="btn btn-primary" 
				style="color:white;" onclick='setRequestHiddenValue(#{request1.newRequestId})' 
				action="#{createrequest.modifyAction()}" ajax="false" >
	        		Update
	    		</p:commandLink>    </p:column>
    
   
    
   
   
    
</p:dataTable>


	     
	     
			
	 
			
	    
	</div>
   </h:form>

<script type="text/javascript">
function start() {
    PF('statusDialog').show();
}
 
function stop() {
    PF('statusDialog').hide();
}
</script>
      </div><!-- end oc container -->
      
   
      
      
      </h:body>

</html>