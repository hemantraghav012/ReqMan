<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
 xmlns:ui="http://java.sun.com/jsf/facelets" 
  xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
 	xmlns:h="http://java.sun.com/jsf/html">
<h:head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="stylesheet" href="resource/css/bootstrap.css"/>
<link rel="stylesheet" href="resource/mystyle/home.css"/>
<link rel="stylesheet" href="resource/mystyle/button.css"/>
<script type="text/javascript" src="resource/js/bootstrap.js"/>
<script type="text/javascript" src="resource/js/jquery.js"/>

	<title> Request </title>
	
	<script>

function setRequestHiddenValue(new_value)
{
	document.getElementById('requestForm:requestId').value = new_value;

}

</script>
	
</h:head>
<h:body>

<div id="header">
	<ui:insert name="header">
		<ui:include src="header.xhtml" />
	</ui:insert>
</div>
       
      <!-- -end of header --> 
      
   
	<div id="categoryheader">
	<ui:insert name="categoryheader">
		<ui:include src="categoryheader.xhtml" />
	</ui:insert>
</div>
        
       <!-- -end of categoryheader -->
        

     <h:form id="requestForm">
  <div class="container fixedcontainer" style=" margin-top:1cm; ">
      
         
         <h:inputHidden id="requestId" value="#{createrequest.requestId}" ></h:inputHidden>
      <div class="row">
      
      	<div class="col-sm-6">
      		<span style=";font-size:25px;margin-left: 3px;">Manage Request List</span>
      	</div>
    
     	<div class="col-sm-6">    
     			
			 <h:commandLink  value="Create New Request" action="#{createrequest.createRequest}" class="btn1 btn   pull-right fontsize"/> 
			
			
		</div>

	  </div>


<div class="ui-fluid ">

	     <p:dataTable id="requestTable" var="request1" value="#{createrequest.newrequestList}" 
	     reflow="true" scrollable="true" scrollHeight="250" 
	     sortBy="#{request1.status},#{request1.title}" 
	     class="table table-striped table-hover table-bordered" 
	     style="margin-top:5px; " filteredValue="#{createrequest.filteredRequestList}" 
	     widgetVar="newrequestListTable">
	     
	     <f:facet name="header">
			<p:outputPanel>
				<h:outputText value="Search all fields:" />
				<h:inputText id="globalFilter" onkeyup="PF('newrequestListTable').filter()" />
			</p:outputPanel>
		</f:facet> 

 
 <p:column filterBy="#{request1.title}"  sortBy="#{request1.title}" 
			headerText="Title"  filterStyle="display:none;" filterMatchMode="contains"  style="width:2.8cm; text-align:center">
				<f:facet name="header">
					<h:outputText value="Title" />
				</f:facet>
				<h:outputText value="#{request1.title}" />
			</p:column>
 
 
 <p:column filterBy="#{request1.description}" headerText="Description" filterStyle="display:none;"  
			 filterMatchMode="contains"  style="width:3.5cm; text-align:center">
				<f:facet name="header">
					<h:outputText value="Description" />
				</f:facet>
				<h:outputText value="#{request1.description}" />
			</p:column>
 
<p:column filterBy="#{request1.completiondate}" headerText="Completion Date"  filterStyle="display:none;"  
			 filterMatchMode="contains"  style="width:2.5cm; text-align:center">
				<f:facet name="header">
					<h:outputText value="Completion Date" />
				</f:facet>
				<h:outputText value="#{request1.completiondate}" />
			</p:column>
    
    
    
    
   <p:column filterBy="#{request1.usercategory}" headerText="Category"  filterStyle="display:none;"  
			 filterMatchMode="contains"  style="width:3cm; text-align:center">
				<f:facet name="header">
					<h:outputText value="Category" />
				</f:facet>
				<h:outputText value="#{request1.usercategory}" />
			</p:column> 
    
     <p:column filterBy="#{request1.userproject}"  headerText="Project"  filterStyle="display:none;"  
			 filterMatchMode="contains"  style="width:3cm;; text-align:center">
				<f:facet name="header">
					<h:outputText value="Project" />
				</f:facet>
				<h:outputText value="#{request1.userproject}"  />
			</p:column> 
    
   
     <p:column filterBy="#{request1.userrequesttype}"   headerText="Requesttype"  filterStyle="display:none;"  
			 filterMatchMode="contains"  style="width:3cm; text-align:center">
				<f:facet name="header">
					<h:outputText value="Requesttype" />
				</f:facet>
				<h:outputText value="#{request1.userrequesttype}"   />
			</p:column> 
    
    
      <p:column filterBy="#{request1.friendName}"   headerText="Team Member"  filterStyle="display:none;"  
			 filterMatchMode="contains"  style="width:3cm; text-align:center">
				<f:facet name="header">
					<h:outputText value="Team Member" />
				</f:facet>
				<h:outputText value="#{request1.friendName}"   />
			</p:column>
    
     <p:column filterBy="#{request1.status}"  sortBy="#{request1.status}" 
			headerText="Status"  filterStyle="display:none;" filterMatchMode="contains"  style="width:2.8cm; text-align:center">
				<f:facet name="header">
					<h:outputText value="Status" />
				</f:facet>
				<h:outputText value="#{request1.status}" />
			</p:column>
    
    
   
    
     <p:column headerText="Attachment" style="margin-right:20cm;  width:3.5cm;" >
       <p:dialog modal="true" widgetVar="statusDialog" header="Status" draggable="false" closable="false" resizable="false">
    <p:graphicImage name="/demo/images/ajaxloadingbar.gif" />
</p:dialog>
<p:commandButton value="Download" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);setRequestHiddenValue(#{request1.newRequestId})" >
        <p:fileDownload value="#{createrequest.fileDownloadView()}" />
    </p:commandButton>
    </p:column>
    
     <p:column headerText="Modify">
<p:commandLink id="nonAjax" styleClass="btn btn-primary fontsize" 
				style="color:white; width:3.5;" onclick='setRequestHiddenValue(#{request1.newRequestId})' 
				action="#{createrequest.modifyAction()}" ajax="false" >
	        		Update
	    		</p:commandLink> 
	    		
   </p:column>   
</p:dataTable>
	    
	</div>
	<div>
		<strong>Export Data &nbsp;</strong>
	    <h:commandButton id="excel" class="btn btn-primary fontsize" value="Excel">
	        <p:dataExporter type="xls" target="requestTable" fileName="request1" postProcessor="#{createrequest.postProcessXLS}" />
	    </h:commandButton>
	 	&nbsp;
	    <h:commandButton id="pdf" class="btn btn-primary fontsize" value="Pdf">
	        <p:dataExporter type="pdf" target="requestTable" fileName="request1" preProcessor="#{createrequest.preProcessPDF}" />
	    </h:commandButton>
	</div>
 




<script type="text/javascript">
function start() {
    PF('statusDialog').show();
}
 
function stop() {
    PF('statusDialog').hide();
}
</script>

      </div><!-- end oc container -->
        </h:form>
   
      
      
      </h:body>

</html>