<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- <html xmlns="http://www.w3.org/1999/xhtml"	xmlns:h="http://java.sun.com/jsf/html"	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough" 
	   xmlns:ui="http://java.sun.com/jsf/facelets" 
	      xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	   xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui">
 -->	   
 <html lang="en"
      xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
	   xmlns:p="http://primefaces.org/ui"
	   xmlns:a="http://xmlns.jcp.org/jsf/passthrough" > 
  
<h:head>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link rel="stylesheet" href="resource/css/bootstrap.css"/>
<link rel="stylesheet" href="resource/mystyle/home.css"/>
<link rel="stylesheet" href="resource/mystyle/createcategory.css"/>
 <link rel="stylesheet" href="resource/mystyle/button.css"/>
<script type="text/javascript" src="resource/js/bootstrap.js"/>
<script type="text/javascript" src="resource/js/jquery.js"/>
<title>New Category</title>

<script>

function setCategoryHiddenValue(new_value)
{
	
	document.getElementById('categoryForm:categoryId').value = new_value;

}

</script>


</h:head>

<h:body>

  

	<div id="header">
	<ui:insert name="header">
		<ui:include src="header.xhtml" />
	</ui:insert>
</div>
       
      <!-- -end of header --> 
   
   
	<div id="categoryheader">
	<ui:insert name="categoryheader">
		<ui:include src="categoryheader.xhtml" />
	</ui:insert>
</div>
        
       <!-- -end of categoryheader -->
       
       
       
      <div class="row">
      <div class="col-sm-9">
       <div class="container  fixedcontainer "  style="margin-left: 0px;   border-top:none; ">
  
  
  <div  style="margin-top:10px;"> 
  <h:form class="form-horizontal" >
  
<h2 style="  margin-bottom:30px; margin-top:0px; text-align:center" >   Create New Request Category</h2>

<div><h:messages style = "color:red;margin:8px;" /></div>

 <div class=" row form-group ">
 <div class="col-sm-3 control-label"><h:outputLabel  >Category Name :</h:outputLabel></div>
<div class=" col-sm-6"> <h:inputText value="#{categorybean.categoryName}" maxlength="20" class="  form-control"  id="categoryname"  required="true" requiredMessage="* Please enter category name"/><span style="color:red;">Please enter upto 20 characters.</span></div>
 <h:message for="categoryname"  style="color:red;margin:8px;"/> 
</div><br></br>



 <div class=" row form-group ">
 <div class="col-sm-3 .col-sm-offset-2"></div>
 <div class="col-sm-6 "><h:commandButton action="#{categorybean.saveCategory}" value="Submit" class="btn fontsize btn-success btn-block"></h:commandButton></div>

</div>

</h:form>
  
  </div>
      

     <hr ></hr>
      
      
       <h:form id="categoryForm">
      <div class="container fixedcontainer1">
 		<h:inputHidden id="categoryId" value="#{categorybean.categoryId}" ></h:inputHidden>
      <div class="row">
      
      	<div class="col-sm-12">
      		<span style=";font-size:25px;margin-left: 3px;">Manage Request Category List</span>
      	<br></br>	(Only active category will be available for transaction)
      	</div>
      	
  

	  </div>


<div class="ui-fluid">

	     <p:dataTable id="categoryTable" var="category" value="#{categorybean.categoryList}" editable="true" editMode="cell"
	     reflow="true" scrollable="true" scrollHeight="250" 
	     sortBy="#{category.status},#{category.name}" 
	     class="table table-striped table-hover table-bordered" 
	     style="margin-top:5px; " filteredValue="#{categorybean.filteredCategoryList}" 
	     widgetVar="categoryListTable">
	     
	     <f:facet name="header" >
			<p:outputPanel>
			<div class="row">
			
				<div class= "col-sm-12">
				<h:inputText id="globalFilter" onkeyup="PF('categoryListTable').filter() "   class="form-control"  />
				 <p:watermark for="globalFilter"  value="Search with a keyword"  />
				</div>
				</div>
			</p:outputPanel>
		</f:facet>
			
	 
			<p:column filterBy="#{category.name}" sortBy="#{category.name}" headerText="Category Name"  
			filterStyle="display:none;" filterMatchMode="contains"   style="padding: 0px 0px 0px 3px;">
				<f:facet name="header">
					<h:outputText value="Category Name"  />
				</f:facet>
				<h:outputText value="#{category.name}" />
			</p:column>
			
			<p:column filterBy="#{category.status}"  sortBy="#{category.status}" 
			headerText="Status"  filterStyle="display:none;" filterMatchMode="contains"  style="width:80px;padding: 0px 0px 0px 3px; ">
				<f:facet name="header">
					<h:outputText value="Status" />
				</f:facet>
				<h:outputText value="#{category.status}" />
			</p:column>
	        
	        <p:column headerText="Status"  sortBy="#{category.status}"  filterStyle="display:none;" filterMatchMode="contains"  style="width:80px;padding: 0px 0px 0px 3px; ">
              <p:cellEditor>
                 <f:facet name="output"><h:outputText value="#{category.status}" /></f:facet>
               <f:facet name="input">
                   <h:selectOneMenu value="#{category.status}" style="width:100%">
                       <f:selectItems   itemLabel="Active" itemValue="Active" />
                        <f:selectItems  itemLabel="InActive" itemValue="InActive" />
                   </h:selectOneMenu>
               </f:facet>    </p:cellEditor>
          </p:column>
	        
	        
	       
	        
	        <p:column  headerText="Modify" exportable="false" style="width:80px;padding: 0px 0px 0px 0px;">
				
				<p:commandLink id="nonAjax" styleClass="btn btn-primary fontsize" 
				style="color:white;width:80px;padding: 0px 0px 0px 0px; " onclick='setCategoryHiddenValue(#{category.userCategoryId})' 
				action="#{categorybean.modifyAction()}" ajax="false" >
	        		Update
	    		</p:commandLink>
	    		 
	        </p:column>
	       
	    </p:dataTable>
	    
	</div>

	<div>
		<strong>Export Data &nbsp;</strong>
	    <h:commandButton id="excel" class="btn btn-primary fontsize" value="Excel">
	        <p:dataExporter type="xls" target="categoryTable" fileName="category" postProcessor="#{categorybean.postProcessXLS}" />
	    </h:commandButton>
	 	&nbsp;
	    <h:commandButton id="pdf" class="btn btn-primary fontsize" value="Pdf">
	        <p:dataExporter type="pdf" target="categoryTable" fileName="category" preProcessor="#{categorybean.preProcessPDF}" />
	    </h:commandButton>
	</div>

</div><!-- end oc container -->
      
      </h:form>
      
      </div>
        </div>
        <div class="col-sm-3" style="background-color:#fff;margin-top:0px;">
       
       <p style="width:250px; padding-top:30px; text-align: center; font-size:30px;">Active request categories can be use for classifying the requests.
                           These categories can be used to filter your requests and managed them effective.</p>
    
        </div>
        
        
      </div>
      </h:body>

</html>